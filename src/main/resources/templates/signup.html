<!DOCTYPE html>
<html>

<head>
	<title>Sign-Up - SiwBooks, online Library</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
		rel="stylesheet">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/form.css" />
</head>

<body class="form-page">

	<style>
		.password-field .position-relative .eye-icon {
			position: absolute;
			right: 1rem;
			top: 50%;
			transform: translateY(-50%);
			cursor: pointer;
			background: var(--primary-brown);
			border-radius: 50%;
			padding: 0.5rem;
			transition: all 0.3s ease;
			z-index: 10;
		}

		.password-field .position-relative .eye-icon:hover {
			background: var(--accent-gold);
			transform: translateY(-50%) scale(1.1);
		}
	</style>

	<!--Bootstrap bundle JS-->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
		crossorigin="anonymous"></script>

	<!--Our JS-->
	<script>
		function togglePassword() {
			const input = document.getElementById("passwordInput");
			const icon = document.getElementById("eyeIcon");

			if (input.type === "password") {
				input.type = "text";
				icon.innerHTML = `
                    <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                    <circle cx="12" cy="12" r="3"/>
                    <line x1="4" y1="4" x2="20" y2="20" stroke="white" stroke-width="2"/>
                `;
			} else {
				input.type = "password";
				icon.innerHTML = `
                    <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                    <circle cx="12" cy="12" r="3"/>
                `;
			}
		}
	</script>

	<!-- Brand Logo -->
	<a class="brand-logo d-flex align-items-center text-decoration-none" href="/" style="margin-top: 2rem;">
		<i class="fas fa-book-open"></i>
		<span class="brand-text">SiwBooks</span>
	</a>

	<!-- Main Content -->
	<div class="form-container">
		<h1 class="form-title text-center">Create an account</h1>

		<form th:action="@{/register}" method="POST">
			<!-- Name field -->
			<div class="form-group mb-3">
				<label for="nameInput" class="form-label">Name</label>
				<input type="text" class="form-control custom-input" id="nameInput" th:field="${user.name}"
					placeholder="Mario">
				<div class="error" th:if="${#fields.hasErrors('user.name')}" th:errors="${user.name}"></div>
			</div>

			<!-- Surname field -->
			<div class="form-group mb-3">
				<label for="surnameInput" class="form-label">Surname</label>
				<input type="text" class="form-control custom-input" id="surnameInput" th:field="${user.surname}"
					placeholder="Rossi">
				<div class="error" th:if="${#fields.hasErrors('user.surname')}" th:errors="${user.surname}"></div>
			</div>

			<!-- Email field -->
			<div class="form-group mb-3">
				<label for="emailInput" class="form-label">Email</label>
				<input type="email" class="form-control custom-input" id="emailInput" th:field="${user.email}"
					placeholder="Mario.Rossi@gmail.com">
				<div class="error" th:if="${#fields.hasErrors('user.email')}" th:errors="${user.email}"></div>
			</div>

			<!-- Username field -->
			<div class="form-group mb-3">
				<label for="usernameInput" class="form-label">Username</label>
				<input type="text" class="form-control custom-input" id="usernameInput"
					th:field="${credentials.username}" placeholder="MarioRossi24">
				<div class="error" th:if="${#fields.hasErrors('credentials.username')}"
					th:errors="${credentials.username}"></div>
				<div class="error" th:if="${usernameDuplicated}" th:text="${usernameDuplicated}"></div>
			</div>

			<!-- Password field -->
			<div class="mb-3 password-field">
				<label for="passwordInput" class="form-label">Password</label>
				<div class="position-relative">
					<input type="password" class="form-control custom-input" id="passwordInput"
						th:field="${credentials.password}" placeholder="••••••••">
					<span class="eye-icon" onclick="togglePassword()">
						<svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
							stroke="white" stroke-width="2" viewBox="0 0 24 24">
							<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z" />
							<circle cx="12" cy="12" r="3" />
						</svg>
					</span>
				</div>
				<div class="error" th:if="${#fields.hasErrors('credentials.password')}"
					th:errors="${credentials.password}"></div>
			</div>

			<!-- Submit button -->
			<button type="submit" class="form-btn">Create Account</button>
		</form>

		<!-- Login link -->
		<p class="form-text">
			Already have an account? <a href="/login" class="form-link">Log in here</a>
		</p>
	</div>

</body>

</html>